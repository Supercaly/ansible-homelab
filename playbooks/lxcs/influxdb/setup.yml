---
#########################################
# Play that creates the LXC on the node.
#########################################
- name: Create influxdb LXC.
  hosts: node
  become: true
  vars_files:
    - "{{ inventory_dir }}/host_vars/influxdb/vars.yml"
    - "{{ inventory_dir }}/host_vars/influxdb/vault.yml"
    - "{{ inventory_dir }}/group_vars/lxcs/vars.yml"
    - "{{ inventory_dir }}/group_vars/lxcs/vault.yml"
  roles:
    - role: roles/create-lxc

#############################
# Play that sets up the host.
#############################
- name: Provision influxdb LXC.
  hosts: influxdb
  become: true

  roles:
    - role: roles/setup-base-lxc
    - role: roles/influxdb2
